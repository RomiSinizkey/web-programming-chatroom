<%
var step = typeof step !== 'undefined' ? step : 1;
var data = typeof data !== 'undefined' ? data : {};
var error = typeof error !== 'undefined' ? error : null;
%>

<%- include('includes/head', {
title: 'Register',
bodyClass: 'bg-light'
}) %>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-6">

            <div class="card shadow-sm auth-card">
                <div class="card-body p-4">

                    <% if (step === 1) { %>
                        <h1 class="h4 text-center mb-3 auth-title">Register Step 1</h1>

                        <% if (error) { %>
                            <div class="alert alert-danger"><%= error %></div>
                        <% } %>

                        <form method="post" action="/register">
                            <input type="hidden" name="step" value="1" />

                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" name="email" class="form-control"
                                       value="<%= data.email || '' %>" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">First name</label>
                                <input type="text" name="firstName" class="form-control"
                                       value="<%= data.firstName || '' %>" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Last name</label>
                                <input type="text" name="lastName" class="form-control"
                                       value="<%= data.lastName || '' %>" required />
                            </div>

                            <button class="btn btn-primary w-100">Next</button>
                        </form>

                        <div class="text-center mt-3">
                            <a href="/" class="link-secondary">Back to login</a>
                        </div>
                    <% } %>

                    <% if (step === 2) { %>
                        <h1 class="h4 text-center mb-3 auth-title">Register Step 2</h1>

                        <div class="alert alert-secondary">
                            <strong><%= data.firstName %> <%= data.lastName %></strong><br>
                            <%= data.email %>
                        </div>

                        <% if (error) { %>
                            <div class="alert alert-danger"><%= error %></div>
                        <% } %>

                        <form method="post" action="/register">
                            <input type="hidden" name="step" value="2" />

                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <input type="password" name="password" class="form-control" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Repeat password</label>
                                <input type="password" name="password2" class="form-control" required />
                            </div>

                            <button class="btn btn-primary w-100">Submit</button>
                        </form>

                        <div class="text-center mt-3">
                            <a href="/register?back=1" class="link-secondary">Back</a>
                        </div>
                    <% } %>

                </div>
            </div>

            <p class="text-center text-muted small mt-3 mb-0 auth-footer">
                Cookie timeout: 30 seconds
            </p>

        </div>
    </div>
</div>

<%- include('includes/foot') %>